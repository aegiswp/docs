---
title: "Creating Patterns"
description: "How to create block patterns for the Aegis theme"
---

## Overview

This guide covers how to create block patterns for the Aegis theme, following the official WordPress pattern API and Aegis conventions.

## Pattern File Structure

Each pattern is a PHP file in the `patterns/` directory with a file header comment and block markup:

```php
<?php
/**
 * Title: My Pattern Name
 * Slug: aegis/my-pattern-name
 * Categories: featured, text
 * Keywords: example, demo
 * Viewport Width: 1280
 * Inserter: yes
 */
?>
<!-- wp:group {"align":"full","layout":{"type":"constrained"}} -->
<div class="wp-block-group alignfull">
  <!-- Block content here -->
</div>
<!-- /wp:group -->
```

## File Header Fields

| Field | Required | Description |
|-------|----------|-------------|
| `Title` | Yes | Display name in the inserter |
| `Slug` | Yes | Unique identifier, prefixed with `aegis/` |
| `Categories` | Yes | Comma-separated category slugs |
| `Keywords` | No | Search keywords |
| `Viewport Width` | No | Preview width in pixels |
| `Inserter` | No | Set to `no` to hide from inserter |
| `Block Types` | No | Associated block types |
| `Post Types` | No | Restrict to specific post types |
| `Template Types` | No | Suggest for specific templates |

## Naming Conventions

- **Section patterns:** `{category}-{variant}.php` (e.g., `hero-centered.php`)
- **Full-page patterns:** `page-{name}.php` (e.g., `page-about.php`)
- **Hidden/utility patterns:** `hidden-{name}.php` (e.g., `hidden-404.php`)
- **Template part patterns:** `{area}-{variant}.php` (e.g., `header-transparent.php`)

## Using Design Tokens

### Colors

Always use preset slugs, never hardcoded hex values:

```html
<!-- Correct -->
<!-- wp:paragraph {"textColor":"primary-500"} -->

<!-- Incorrect -->
<!-- wp:paragraph {"style":{"color":{"text":"#6c757d"}}} -->
```

### Spacing

Use preset spacing tokens:

```html
<!-- Correct -->
<!-- wp:group {"style":{"spacing":{"padding":{"top":"var:preset|spacing|lg"}}}} -->

<!-- Incorrect -->
<!-- wp:group {"style":{"spacing":{"padding":{"top":"48px"}}}} -->
```

### Font Sizes

Use preset font size slugs:

```html
<!-- Correct -->
<!-- wp:heading {"fontSize":"36"} -->

<!-- Incorrect -->
<!-- wp:heading {"style":{"typography":{"fontSize":"36px"}}} -->
```

## Translation

Use appropriate WordPress i18n functions for all user-facing text:

### `esc_html_x()`

For translated text displayed in HTML with context:

```php
<h2><?php echo esc_html_x( 'Features', 'Pattern heading', 'aegis' ); ?></h2>
```

### `esc_html__()`

For translated text in HTML without context:

```php
<p><?php echo esc_html__( 'Get started today.', 'aegis' ); ?></p>
```

### `esc_attr__()`

For translated text in HTML attributes:

```php
<img alt="<?php echo esc_attr__( 'Feature illustration', 'aegis' ); ?>" />
```

### Rich text with HTML

```php
<?php echo wp_kses_post( __( 'Lorem ipsum <em>Hello</em> dolor sit amet.', 'aegis' ) ); ?>
```

## Images

Use `get_template_directory_uri()` for dynamic image paths:

```html
<!-- wp:image {"sizeSlug":"large","linkDestination":"none"} -->
<figure class="wp-block-image size-large">
  <img src="<?php echo esc_url( get_template_directory_uri() ); ?>/assets/images/project.webp"
       alt="<?php echo esc_attr_x( 'Project image', 'Alt text', 'aegis' ); ?>"/>
</figure>
<!-- /wp:image -->
```

<Warning>
Always include alt text for accessibility, remove image IDs (`"id":125`) for portability, and use WebP format for optimal performance.
</Warning>

## Cleanup Checklist

Before committing a pattern, ensure:

1. **Remove `queryId`** from Query blocks
2. **Remove `theme` attribute** from Template Part blocks
3. **Remove image IDs** from Image blocks
4. **Use preset tokens** for all colors, spacing, and font sizes
5. **Add alt text** to all images
6. **Translate all text** using i18n functions
7. **Test in both** light and dark mode

### Query Block Cleanup

```html
<!-- Before -->
<!-- wp:query {"queryId":18,"query":{"perPage":8,...}} -->

<!-- After -->
<!-- wp:query {"query":{"perPage":8,...}} -->
```

### Template Part Cleanup

```html
<!-- Before -->
<!-- wp:template-part {"slug":"header","theme":"aegis","area":"header"} /-->

<!-- After -->
<!-- wp:template-part {"slug":"header","area":"header"} /-->
```

## Hiding Patterns

To hide a pattern from the inserter (for utility patterns):

```php
/**
 * Title: 404 Content
 * Slug: aegis/hidden-404
 * Inserter: no
 */
```

## Block Types Association

Associate a pattern with a specific block to suggest it when that block is inserted:

```php
/**
 * Title: Footer Default
 * Slug: aegis/footer-default
 * Categories: footer
 * Block Types: core/template-part/footer
 */
```

## Pattern Order

Patterns appear alphabetically by filename in the inserter. Rename files to control ordering.

## Testing

After creating a pattern:

1. Insert it from the Block Inserter
2. Verify all blocks render correctly
3. Test responsive behavior at mobile, tablet, and desktop widths
4. Verify dark mode appearance
5. Check that all text is translatable
6. Validate accessibility (heading hierarchy, alt text, contrast)
